# Verilog HDL初识



## 硬件描述语言

硬件描述语言，就是用代码的形式描述硬件的功能，它包含了可综合与不可综合的部分。综合是将代码转化成实际的电路，也被成为网表。仿真是在综合前对代码进行仿真测试，检验BUG。



## 不可综合的代码

initial;while/repeat/forever;三态门;force/wait/fork;#n



## 不推荐使用的代码

task/function;for;integer;casex/casez



## 推荐使用的代码

reg/wire;parameter;assign/always;if else/case



## Verilog HDL 的设计流程

自顶向下，逐步求精



---

# 模块



## 模块示例

```verilog
module mux(out,in0,in1,sel);
    // module 模块名(输入、输出端口列表) 
    parameter N=8;
    // 参数表示位数
    output [N-1:0] out;
    input [N-1:0] in0,in1;
    input sel;
    // 输入、输出端口描述（描述外部特性）【没有[]默认1位】
    assign out=sel?in1:in0;
    // 逻辑功能描述（描述内部特性）
endmodule
// 程序为模块结构，包含在moudule与endmodle之间
```

补充：

1. 双向端口：`inout [信号位宽-1:0] 端口名;`
2. 信号类型：reg(寄存器类型)；wire(线网类型)
   - `reg [width-1:0] R1, R2, R3, ......;`
   - `wire [width-1:0] W1, W2, W3,......;`



## 模块例化

可采用位置关联或名字关联。



---

# 信号类型

主要有两种类型：寄存器类型和线网类型。

## 信号位宽



## 线网类型wire



## 寄存器类型reg



## wire和reg的区别

reg型信号并不一定生成寄存器。总结的一套方法：在本模块中使用always设计的信号都定义为reg型，其他信号都定义为wire型。



---

# 功能描述-组合逻辑



## 程序语句

### assign语句

assign语句是连续赋值语句，习惯上当作连线用。

`assign a = b (逻辑运算符) c;`

### always语句

always语句是条件循环语句，是由敏感变量表的事件驱动来实现的。

```verilog
always @(敏感事件)begin
    //有时会用*来代替敏感事件，*表示程序语句中所有条件信号
    //posedge 表示上升沿，negedge表示下降沿
    程序语句
end
```

补充：时钟：只有放在敏感列表并且是边沿触发的才是时钟



---

# 数字进制



## 数字表示方式

最常用格式：`<位宽>'<基数><数值>`

B，O，D，H分别对应二进制，八进制，十进制，十六进制



二进制是基础



## 假想状态（不定态、高阻态）



### 不定态

X态，称之为不定态，其常用于判断条件，从而告诉综合工具设计者不关心他的电平是多少，是0还是1都可以。



### 高阻态

Z态，一般称之为高阻态，表示设计者不驱动这个信号（既不给0也不给1），通常用于三态门接口当中。高阻态“Z”表示“不驱动总线”这个行为，他的出现是减少管线的结果，在FPGA内部没有必要用到高阻态增加麻烦。



## 算术运算符

1+1=10；0-1=1。

尽量避免`/`和`%`运算,应为占用资源太多。



## 问题总结



### 位宽问题

最终的结果取决于“=”号左边信号的位宽，保存低位，丢弃高位。





